jQuery(document).ready(function(n){function i(i){var o=i.width()/2,e=i.offset().left+o,s=i.offset().top+o-n(window).scrollTop(),d=t(s,e,o,n(window).height(),n(window).width());return i.css("position","fixed").velocity({top:s-o,left:e-o,translateX:0},0),d}function t(n,i,t,o,e){var s=i>o/2?i:o-i,d=n>e/2?n:e-n;return Math.ceil(Math.sqrt(Math.pow(s,2)+Math.pow(d,2))/t)}function o(i,t,o){i.velocity({scale:t},0,function(){n("body").toggleClass("overflow-hidden",o),o?i.parents(".cd-section").addClass("modal-is-visible").end().off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"):i.removeClass("is-visible").removeAttr("style").siblings('[data-type="modal-trigger"]').removeClass("to-circle")})}function e(){var i=n(".cd-section.modal-is-visible");i.removeClass("modal-is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){o(i.find(".cd-modal-bg"),1,!1)}),i.parents(".no-csstransitions").length>0&&o(i.find(".cd-modal-bg"),1,!1)}n('[data-type="modal-trigger"]').on("click",function(){var t=n(this),e=i(t.next(".cd-modal-bg"));t.addClass("to-circle"),t.next(".cd-modal-bg").addClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){o(t.next(".cd-modal-bg"),e,!0)}),t.parents(".no-csstransitions").length>0&&o(t.next(".cd-modal-bg"),e,!0)}),n(".cd-section .cd-modal-close").on("click",function(){e()}),n(document).keyup(function(n){"27"==n.which&&e()}),n(window).on("resize",function(){n(".cd-section.modal-is-visible").length>0&&window.requestAnimationFrame(updateLayer)})});