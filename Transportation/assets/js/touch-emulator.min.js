!function(e,t,n,o){"use strict";function r(e,t,n,o,r){o=o||0,r=r||0,this.identifier=t,this.target=e,this.clientX=n.clientX+o,this.clientY=n.clientY+r,this.screenX=n.screenX+o,this.screenY=n.screenY+r,this.pageX=n.pageX+o,this.pageY=n.pageY+r}function i(){var e=[];return e.item=function(e){return this[e]||null},e.identifiedTouch=function(e){return this[e+1]||null},e}function u(){for(var n=[e,t.documentElement],r=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"],i=0;i<n.length;i++)for(var u=0;u<r.length;u++)n[i]&&n[i][r[u]]==o&&(n[i][r[u]]=null)}function c(){return"ontouchstart"in e||e.Modernizr&&e.Modernizr.touch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>2}function s(e){e.preventDefault(),e.stopPropagation()}function a(e){return function(t){s(t),1===t.which&&(("mousedown"==t.type||!g||g&&!g.dispatchEvent)&&(g=t.target),y&&!t.shiftKey&&(d("touchend",t),y=!1),d(e,t),// we're entering the multi-touch mode!
!y&&t.shiftKey&&(y=!0,v={pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY},d("touchstart",t)),"mouseup"==t.type&&(v=null,y=!1,g=null))}}function d(e,n){var o=t.createEvent("Event");o.initEvent(e,!0,!0),o.altKey=n.altKey,o.ctrlKey=n.ctrlKey,o.metaKey=n.metaKey,o.shiftKey=n.shiftKey,o.touches=f(n,e),o.targetTouches=f(n,e),o.changedTouches=l(n,e),g.dispatchEvent(o)}function h(e){var t=new i;if(y){var n=m.multiTouchOffset,o=v.pageX-e.pageX,u=v.pageY-e.pageY;t.push(new r(g,1,v,-1*o-n,-1*u+n)),t.push(new r(g,2,v,o+n,u-n))}else t.push(new r(g,1,e,0,0));return t}function f(e,t){if("mouseup"==e.type)return new i;var n=h(e);return y&&"mouseup"!=e.type&&"touchend"==t&&n.splice(1,1),n}function l(e,t){var n=h(e);return!y||"mouseup"==e.type||"touchstart"!=t&&"touchend"!=t||n.splice(0,1),n}function p(e){var n,o,r,i;for(o=0;o<e.touches.length;o++){n=e.touches[o],r=E[n.identifier],r||(r=E[n.identifier]=t.createElement("div"),t.body.appendChild(r)),i=m.template(n);for(var u in i)r.style[u]=i[u]}if("touchend"==e.type||"touchcancel"==e.type)for(o=0;o<e.changedTouches.length;o++)n=e.changedTouches[o],r=E[n.identifier],r&&(r.parentNode.removeChild(r),delete E[n.identifier])}function m(){c()||(u(),e.addEventListener("mousedown",a("touchstart"),!0),e.addEventListener("mousemove",a("touchmove"),!0),e.addEventListener("mouseup",a("touchend"),!0),e.addEventListener("mouseenter",s,!0),e.addEventListener("mouseleave",s,!0),e.addEventListener("mouseout",s,!0),e.addEventListener("mouseover",s,!0),// it uses itself!
e.addEventListener("touchstart",p,!0),e.addEventListener("touchmove",p,!0),e.addEventListener("touchend",p,!0),e.addEventListener("touchcancel",p,!0))}var v,g,y=!1,E={};t.createTouch||(t.createTouch=function(t,n,i,u,c,s,a,d,h){return(d==o||h==o)&&(d=u-e.pageXOffset,h=c-e.pageYOffset),new r(n,i,{pageX:u,pageY:c,screenX:s,screenY:a,clientX:d,clientY:h})}),t.createTouchList||(t.createTouchList=function(){for(var e=new i,t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length=arguments.length,e}),m.multiTouchOffset=75,m.template=function(e){var t=30,n="translate("+(e.clientX-t/2)+"px, "+(e.clientY-t/2)+"px)";return{position:"fixed",left:0,top:0,background:"#fff",border:"solid 1px #999",opacity:.6,borderRadius:"100%",height:t+"px",width:t+"px",padding:0,margin:0,display:"block",overflow:"hidden",pointerEvents:"none",webkitUserSelect:"none",mozUserSelect:"none",userSelect:"none",webkitTransform:n,mozTransform:n,transform:n,zIndex:100}},"function"==typeof define&&define.amd?define(function(){return m}):"undefined"!=typeof module&&module.exports?module.exports=m:e[n]=m}(window,document,"TouchEmulator");